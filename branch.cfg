cfgs:
  default:
    branches: ['master']
    inherit:
      metrics-exporter:
        base_definition:
          repo:
            source_labels:
              - name: cloud.gardener.cnudie/dso/scanning-hints/source_analysis/v1
                value:
                  policy: skip
                  comment: |
                    we use gosec for sast scanning. See attached log.
        jobs:
          release:
            traits:
              version:
                preprocess: finalize
              component_descriptor:
                ocm_repository: europe-docker.pkg.dev/gardener-project/releases
              publish:
                dockerimages:
                  metrics-exporter:
                    image: europe-docker.pkg.dev/gardener-project/releases/gardener/metrics-exporter
              release:
                nextversion: 'bump_minor'
                assets:
                  - type: build-step-log
                    step_name: sast
                    purposes:
                      - lint
                      - sast
                      - gosec
                    comment: |
                      we use gosec (linter) for SAST scans
                      see: https://github.com/securego/gosec
                      enabled by https://github.com/gardener/gardener-metrics-exporter/pull/120
  release-branches:
    index: 1
    branches: ['release-.*']
    inherit:
      metrics-exporter:
        base_definition:
          repo:
            source_labels:
              - name: cloud.gardener.cnudie/dso/scanning-hints/source_analysis/v1
                value:
                  policy: skip
                  comment: |
                    we use gosec for sast scanning. See attached log.
        jobs:
          release:
            traits:
              release:
                nextversion: 'bump_patch'
                assets:
                  - type: build-step-log
                    step_name: sast
                    purposes:
                      - lint
                      - sast
                      - gosec
                    comment: |
                      we use gosec (linter) for SAST scans
                      see: https://github.com/securego/gosec
                      enabled by https://github.com/gardener/gardener-metrics-exporter/pull/120
